---
layout: post
title: sudo 설정하기
category : Linux
tags : [sudo,visudo,linux,acct,lastcomm]
---
sudo의 필요성
----
Linux 환경에서 sudo는 root계정으로 로그인하지 않은 상태로 sudoers의 설정에 따라 특정 명령을 사용할 수 있도록 해줍니다.    
이에 따라 서버 관리자들이 root계정 사용을 최소화 하고 sudo를 이용하여 작업함으로써 누가 어떤 커맨드를 사용했는지 추적이 가능해집니다.

    // acct 미설치시
    $ dpkg -l | grep acct   // 설치 확인
    $ sudo apt-get install acct   // 설치
    // 사용자 커맨드 추적
    $ lastcomm -u {사용자ID}

설정 수정방법
----
/etc/sudoers 에 각 사용자별 사용 가능한 설정이 포함되어 있으나 vi로 직접 수정하기 보다는 visudo 명령으로 수정하기를 권장합니다.

    $ visudo

![visudo edit](/assets/img/linux/sudo-edit/1.png)    


사용자 설정
----
특정 사용자에게 명령 권한을 설정할 때는 아래와 같이 설정 할 수 있습니다.

    [user] [host]=[command]

    # User privilege specification
    root    ALL=(ALL:ALL) ALL
    // kimjh 사용자는 password입력없이 모든 명령을 실행 할 수 있습니다.
    kimjh   ALL=(ALL) NOPASSWD:ALL
    // custom 사용자는 localhost에서 "/sbin/shutdown -h now"명령을 실행 할 수 있습니다.      
    custom  localhost=/sbin/shutdown -h now

그룹 설정
----
특정 그룹에 명령 권한을 설정할 때는 아래와 같이 설정 할 수 있습니다.

    %[group] [host]=[command]

    # Members of the admin group may gain root privileges
    %admin ALL=(ALL) ALL
    // 그룹 foo에 속한 사용자는 localhost에서 "/sbin/shutdown -h now"명령을 실행 할 수 있습니다.   
    %foo  localhost=/sbin/shutdown -h now


참고
----
[sudo 사용의 필요성](http://deois.tistory.com/42)    
[Linux/Unix]로그 파일](http://blog.naver.com/PostView.nhn?blogId=bestheroz&logNo=88266186)   
[sudoers 파일](http://egloos.zum.com/taehyo/v/4200593)
