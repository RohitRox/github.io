<!DOCTYPE html>
<html lang="en-us">

  {% include head.html %}

  <body>

    {% include sidebar.html %}

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="{{ site.baseurl }}/" title="Home" title="{{ site.title }}">
              <img class="masthead-logo" src="{{ site.baseurl }}{{ site.logo }}"/>
            </a>
            <small>{{ site.tagline }}</small>
          </h3>
        </div>
      </div>

      <div class="container content">
        {{ content }}
      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
		var foldableEvent = {
			'click' : function(target){
				if (target.className.indexOf('fold-by-click') == -1)
				{
					return;
				}
				
				var subMenu = target.parentElement.querySelectorAll('a.sidebar-nav-item-sub');
				if (subMenu.length < 1)
				{
					return;
				}
				
				var display = subMenu[0].style.display;
				subMenu.forEach(function(elem, index){
					elem.style.display = (display != 'none')? 'none' : '';
				});
			}
		};
		
		var activeEvent = {
			'click' : function(target){
				if (target.className.indexOf('sidebar-nav-item') == -1)
				{
					return;
				}
				
				document.querySelectorAll('a.sidebar-nav-item').forEach(function(elem,index){
					elem.className = elem.className.replace('active');
				});
				
				target.className += ' active';
			}
		};
		
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');
		var foldable = document.querySelector('.foldable');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if (target === toggle) {
            checkbox.checked = !checkbox.checked;
            e.preventDefault();
          } else if (checkbox.checked && !sidebar.contains(target)) {
            /* click outside the sidebar when sidebar is open */
            checkbox.checked = false;
          }
		  
		  foldableEvent['click'](target);
		  activeEvent['click'](target);
        }, false);
      })(document);
	  
	  var active = false;
	  var homeElem = {};
	  document.querySelectorAll('a.sidebar-nav-item').forEach(function(elem,index){
		var href = elem.getAttribute('href');
		if (href == '/') { homeElem = elem; return; }
		if (document.URL.lastIndexOf(href) != -1 && document.URL.lastIndexOf(href) + href.length == document.URL.length)
		{
			elem.className += ' active';
			active = true;
		}
	  });
	  
	  if (!active) 
	  {
		homeElem.className += ' active';
	  }
	  
	  console.log('document.URL : ' + document.URL);
	  console.log('document.baseURI : ' + document.baseURI);
	  console.log('document.documentURI : ' + document.documentURI);
    </script>
    {% if site.google_analytics_token %}
    <script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', '{{ site.google_analytics_token }}', 'auto');
ga('send', 'pageview');
    </script>
    {% endif %}
  </body>
  {% if site.disqus_short_name %}
  <script id="dsq-count-scr" src="//{{ site.disqus_short_name }}.disqus.com/count.js" async></script>
  {% endif %}
</html>
